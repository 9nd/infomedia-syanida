function get_random_color(){var e=Array("bg-blue-lightest","bg-green-lightest","bg-red-lightest","bg-indigo-lightest","bg-purple-lightest","bg-pink-lightest","bg-orange-lightest","bg-yellow-lightest","bg-lime-lightest","bg-teal-lightest","bg-gray-lightest");return e[Math.floor(Math.random()*e.length)]}window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),$(".focus-color").focus(function(){$(this).css("background-color","#fff09e")});var color_entered="",def_color_t1="",def_color_t2="",title1="",title2="";function ucfirst(e){return"string"!=typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)}function action_change(e,t){$("#"+t).change(function(){var a=$("#"+t).prop("checked");$("#"+e+" .checkbox").prop("checked",a).iCheck("update")})}$(".btn-card").mouseenter(function(){title1=$(this)[0].children[0].children[1].children[0],title2=$(this)[0].children[0].children[1].children[1],def_color_t1=title1.classList[2],def_color_t2=title2.classList[2],color_entered="text-white",$(title1).removeClass(def_color_t1),$(title2).removeClass(def_color_t2),$(title1).addClass(color_entered),$(title2).addClass(color_entered)}).mouseleave(function(){$(title1).removeClass(color_entered),$(title2).removeClass(color_entered)}),$(".focus-color").blur(function(){$(this).css({"background-color":""})}),$("#general_check").change(function(){var e=$("#general_check").prop("checked");$(".checkbox").prop("checked",e).iCheck("update")}),$('.checkbox , input[type="checkbox"].flat-red').click(function(){0==$(this).prop("checked")&&$("#general_check").prop("checked",!1);var e=$(".checkbox").length;$(".checkbox:checked").length==e&&$("#general_check").prop("checked",!0)});var ybs_table=$("table.ybs-table");$.each(ybs_table,function(e,t){id_table=t.id,$("#"+id_table+".ybs-table th.checkbox-header").append('<label><input id="header-checkbox-'+id_table+'" type="checkbox" class="header-checkbox"> </label>'),id_header="header-checkbox-"+id_table,action_change(id_table,id_header)}),$(".header-checkbox").change(function(){var e=$(this).attr("id");action_change(e.toString().replace("header-checkbox-",""),e)});var stop="false";$(".table").delegate("tr.ybs-rows-click","click",function(e){if("checkbox"!==e.target.type){$(":checkbox",this).trigger("click");var t=$(":checkbox",this).prop("checked");$(":checkbox",this).prop("checked",!t).iCheck("update"),stop="true"}});var stops="false";function get_checked_table(){var e=[],t=($(".checkbox").length,$(".checkbox:checked").length),a=$(".checkbox:checked");for(x=0;x<t;x++){var o="";o=a[x].value,e.push(o.trim())}return e}function get_total_value_table(e){var t=$(e).length,a=$(e);for(x=0;x<t;x++)ss=a[x].text;return ss}function convert_to_editor(e){var t=e.toString();return v1=t.replace(/\\/gi,"\\\\"),v2=v1.replace(/\"/gi,'\\"'),v3=v2.replace(/\'/gi,"'"),v3}function get_json_format(e,t){try{var a=t.toString();v1=a.replace(/\\/gi,"\\\\"),v2=v1.replace(/\"/gi,'\\"'),v2=v2.replace(/\&/gi,"%26"),v2=v2.replace(/\+/gi,"%2B"),k1=e.replace(/\\/gi,"\\\\"),k2=k1.replace(/\"/gi,'\\"'),k2=k2.replace(/\&/gi,"%26");var o=$("#"+e);return void 0===o||$(o).hasClass("ybs-input-number")&&(v2=v2.replace(/\,/gi,"")),obj='"'+k2.trim()+'":"'+v2.trim()+'"',obj}catch(t){return'"'+e+'":""'}}function get_post_format(e,t){try{var a=t.toString();v1=a.replace(/\\/gi,"\\\\"),v2=v1.replace(/\"/gi,'\\"'),v2=v2.replace(/\&/gi,"%26"),v2=v2.replace(/\+/gi,"%2B"),k1=e.replace(/\\/gi,"\\\\"),k2=k1.replace(/\"/gi,'\\"'),k2=k2.replace(/\&/gi,"%26");var o=$("#"+e);return void 0===o||$(o).hasClass("ybs-input-number")&&(v2=v2.replace(/\,/gi,"")),obj=k2.trim()+"="+v2.trim(),obj}catch(t){return e+"="}}function ybs_dataSending(e){var t="";return $.each(e,function(e,a){t=t+a+","}),"data_ajax={"+(t=t.substr(0,t.length-1))+"}"}function get_dataSending(e){var t=$("#"+e+" .data-sending"),a=[];return $.each(t,function(e,t){var o=$(t).ybs_json();void 0===o||a.push(o)}),a}function getForm(e){var t=[];return $("#"+e).each(function(){var e=$(this).find(":input");$(e).each(function(){if("radio"==this.type||"checkbox"==this.type){if(""!==this.name&&void 0!==$(this).attr("checked")){var e=get_json_format(this.name,this.value);t.push(e)}}else if(""!==this.name){e=get_json_format(this.name,this.value);t.push(e)}})}),t}function ybs_dtSending(e){var t="";return $.each(e,function(e,a){t=t+a+","}),"{"+(t=t.substr(0,t.length-1))+"}"}$(".table").delegate("tr.ybs-rows-click.sound-table","click",function(e){if("checkbox"!==e.target.type){$(":checkbox",this).trigger("click");var t=$(":checkbox",this).prop("checked");$(":checkbox",this).prop("checked",!t).iCheck("update"),play_sound_apply(),stops="true"}}),function(e){e.fn.get_checked=function(t){""!=t&&null!=t||(t=e(this).attr("id"));var a=[],o=(e("#"+t+" .checkbox").length,e("#"+t+" .checkbox:checked").length),n=e("#"+t+" .checkbox:checked");for(x=0;x<o;x++){var s="";s=n[x].value,a.push(s.trim())}return a}}(jQuery),function(e){e.fn.ybs_json=function(t){var a,o=t;return""!=o&&null!=o&&void 0!==o||""!=(o=e(this).attr("name"))&&null!=o&&void 0!==o||(o=e(this).attr("id")),void 0===o||(a=get_json_format(o,e(this).val())),a}}(jQuery),$(".sound-apply").click(function(){play_sound_apply()}),$(".sound-entered").click(function(){play_sound_entered()}),$(".sound-click").click(function(){play_sound_click()}),$(".sound-success").click(function(){play_sound_success()}),$(".sound-failed").click(function(){play_sound_failed()});var sound_click=$("#sound_click")[0],sound_entered=$("#sound_entered")[0],sound_apply=$("#sound_apply")[0],sound_success=$("#sound_success")[0],sound_failed=$("#sound_failed")[0];function play_sound_click(){}function play_sound_entered(){}function play_sound_apply(){}function play_sound_success(){}function play_sound_failed(){}function sound_stop(){sound_click="",sound_entered="",sound_apply="",sound_success="",sound_failed=""}function prepare_sound(){sound_click=$("#sound_click")[0],sound_entered=$("#sound_entered")[0],sound_apply=$("#sound_apply")[0],sound_success=$("#sound_success")[0],sound_failed=$("#sound_failed")[0]}function load_style_icheck(){$(function(){$(".select2").select2(),$("#datemask").inputmask("dd/mm/yyyy",{placeholder:"dd/mm/yyyy"}),$("#datemask2").inputmask("mm/dd/yyyy",{placeholder:"mm/dd/yyyy"}),$("[data-mask]").inputmask(),$("#reservation").daterangepicker(),$("#reservationtime").daterangepicker({timePicker:!0,timePickerIncrement:30,format:"MM/DD/YYYY h:mm A"}),$("#daterange-btn").daterangepicker({ranges:{Today:[moment(),moment()],Yesterday:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},startDate:moment().subtract(29,"days"),endDate:moment()},function(e,t){$("#daterange-btn span").html(e.format("MMMM D, YYYY")+" - "+t.format("MMMM D, YYYY"))}),$("#datepicker").datepicker({autoclose:!0}),$(".datepicker").datepicker({autoclose:!0,format:"dd.mm.yyyy"}),$('input[type="checkbox"].minimal, input[type="radio"].minimal').iCheck({checkboxClass:"icheckbox_minimal-blue",radioClass:"iradio_minimal-blue"}),$('input[type="checkbox"].minimal-red, input[type="radio"].minimal-red').iCheck({checkboxClass:"icheckbox_minimal-red",radioClass:"iradio_minimal-red"}),$('input[type="checkbox"].flat-red, input[type="radio"].flat-red').iCheck({checkboxClass:"icheckbox_flat-green",radioClass:"iradio_flat-green"}),$(".my-colorpicker1").colorpicker(),$(".my-colorpicker2").colorpicker(),$(".timepicker").timepicker({minuteStep:1,showSeconds:!0,showMeridian:!1,showInputs:!1})})}function action_button_header(e,t,a,o,n,s,r){$("#menu_link_create").click(function(){$("#button_front_c_d").removeClass("btn-delete"),$("#button_front_c_d").removeClass("btn-update"),$("#button_front_c_d").addClass("btn-create"),$("#button_front_c_d").attr("title","create"),$("#button_front_c_d").html('<i class="fa  fa-file-o"></i>  Create'),$("#btn-general-1").attr("onclick",'load_paging("'+e+'","")'),$("#btn-general-1").click()}),$("#menu_link_update").click(function(){$("#button_front_c_d").removeClass("btn-delete"),$("#button_front_c_d").removeClass("btn-create"),$("#button_front_c_d").addClass("btn-update");var e=get_checked_table();$("#button_front_c_d").attr("title","Update Checked"),$("#button_front_c_d").html('<i class="fa fa-pencil-square-o"></i>  Update Checked'),$("#btn-general-1").attr("onclick",'load_paging("'+s+'","'+e+'")'),$("#btn-general-1").click()}),$("#menu_link_delete").click(function(){$("#button_front_c_d").removeClass("btn-create"),$("#button_front_c_d").removeClass("btn-update"),$("#button_front_c_d").addClass("btn-delete");var e,a=get_checked_table(),o=[],n=[],s=0;for(s=0;s<a.length;s++)e=a[s].split("-"),n.push(e[0]),o.push(s+1+". "+e[1]);$(".modal-body").empty(),$("#button_front_c_d").attr("title","delete"),$("#button_front_c_d").html('<i class="fa fa-trash-o"></i>  Delete Checked'),a.length>0&&($(".modal-body").empty(),$(".modal-body").append("<p>Data yang akan di hapus :</p>"),$(".modal-body").append("<p>"+o+"</p>"),$("#button_konfirm_delete").attr("onclick",'ybsProcDelTable("'+n+'","'+t+'","'+r+'")'),$("#button_front_c_d").attr("data-toggle","modal"),$("#button_front_c_d").attr("data-target","#modal-danger"),$("#menu_link_delete").attr("data-toggle","modal"),$("#menu_link_delete").attr("data-target","#modal-danger"))}),$("#button_front_c_d").click(function(){var a,o=get_checked_table(),n=[],s=0;for(s=0;s<o.length;s++)a=o[s].split("-"),n.push(s+1+". "+a[1]);$(".modal-body").empty(),$("#button_front_c_d").attr("data-toggle",""),$("#button_front_c_d").attr("data-target",""),$("#button_front_c_d").hasClass("btn-create")?($("#btn-general-1").attr("onclick",'load_paging("'+e+'","'+o+'")'),$("#btn-general-1").click()):$("#button_front_c_d").hasClass("btn-delete")&&o.length>0&&$("#button_front_c_d").hasClass("btn-delete")&&($(".modal-body").empty(),$(".modal-body").append("<p>Data yang akan di hapus :</p>"),$(".modal-body").append("<p>"+n+"</p>"),$("#button_konfirm_delete").attr("onclick",'ybsProcDelTable("'+o+'","'+t+'","'+r+'")'),$("#button_front_c_d").attr("data-toggle","modal"),$("#button_front_c_d").attr("data-target","#modal-danger"))}),$("#button_front_download").click(function(){}),$("#download_pdf").click(function(){$("#button_front_download").attr("href",o),$("#button_front_download").html('<i class="fa fa-arrow-circle-down"></i>  download pdf')}),$("#download_word").click(function(){$("#button_front_download").attr("href",n),$("#button_front_download").html('<i class="fa fa-arrow-circle-down"></i>  download word')}),$("#download_excel").click(function(){$("#button_front_download").attr("href",a),$("#button_front_download").html('<i class="fa fa-arrow-circle-down"></i>  download excel')})}function ybs_table_filter(e,t){var a,o,n,s;for(a=document.getElementById(t).value.toUpperCase(),columnsearch=document.getElementById("button_filter").value,table=document.getElementById(e),o=table.getElementsByTagName("tr"),s=0;s<o.length;s++)(n=o[s].getElementsByTagName("td")[columnsearch])&&(n.innerHTML.toUpperCase().indexOf(a)>-1?o[s].style.display="":o[s].style.display="none")}function show_error_message(e){config_toast_master(),toastr.error(e)}function show_warning_message(e){config_toast_master(),toastr.warning(e)}function remove_message(){toastr.clear()}function show_success_message(e){config_toast_master(),toastr.success(e)}function config_toast_master(){toastr.clear(),toastr.options={closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"toast-bottom-full-width",preventDuplicates:!0,onclick:null,showDuration:"300",hideDuration:"20000",timeOut:"20000",extendedTimeOut:"20000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"}}function start_loading_in(e){var t=e;t=(t=(t=t.replace("#","_")).replace(".","_")).replace(" ",""),$("#loading_progress"+t).hasClass("overlay")||$(e).append('<div class="overlay" id="loading_progress'+t+'"> <i class="fa fa-refresh fa-spin"></i></div>')}function stop_loading_in(e){var t=e;t=(t=(t=t.replace("#","_")).replace(".","_")).replace(" ",""),$("#loading_progress"+t).remove()}$(".filter-table").click(function(){var e=$(this).prop("id"),t=e.split("--");$("#button_filter").val(t[1]),$("#button_filter").html($("#"+e).text()+"&nbsp; <span class='caret'></span><span class='sr-only'>Toggle Dropdown</span>")});var svrUFile="/Service_Upload/upload/",svrRFile="/Service_Upload/remove_upload/",svrCMB="/YbsService/combobox_data",svrTMP="/Service_Upload/save_temp/",svrAccessFile="/Service_Storage/get_access_file/",svrAccessFileTMP="/Service_Storage/get_access_file_temp/",svrClearTMP="/Service_Upload/clear_temp/";function load_paging(e,t){start_loading_in("#box-content-body"),d=e,dt=get_json_format("data",t),send_data=ybs_dataSending([dt]),$.ajax({type:"GET",url:d,data:send_data,processData:!1,cache:!1,success:function(e){var t=JSON.parse(e);switch(t.success){case"true":remove_error_message(),stop_loading_in("#box-content-body"),$("#box-content-body").hide(),$("#box-content-body").html(t.message),$("#box-content-body").fadeIn(),$(".box").boxWidget(),$("#count-notification").remove(),$("#id-notify").after(t.count_notify),$("#id-list-notify").empty(),$("#id-list-notify").append(t.data_notify),$("#menu-notification").after(t.menu_configurator),$("#id-title-page").empty(),$("#id-title-page").append(t.title_page),$(".breadcrumb").remove(),$("#id-title-page").after(t.breadcrumb);break;case"false":show_error_message(t.message),$(t.elementid).focus(),play_sound_failed(),stop_loading_in("#box-content-body");break;case"redirect":load_paging(t.message,t.param);break;case"redirect-no-ajax":$("#redirect-form").prop("action",t.message),$("#redirect-button").click()}}})}function search_form(e){start_loading_in("#box-content-body"),d=e,code=$("#txt_search_form").ybs_json(),send_data=ybs_dataSending([code]),$.ajax({type:"GET",url:d,data:send_data,processData:!1,cache:!1,success:function(e){var t=JSON.parse(e);switch(t.success){case"true":load_paging(t.message,"");break;case"false":show_error_message(t.message),$(t.elementid).focus(),play_sound_failed(),stop_loading_in("#box-content-body");break;case"redirect":load_paging(t.message,t.param);break;case"redirect-no-ajax":$("#redirect-form").prop("action",t.message),$("#redirect-button").click()}}})}function ybsRequest(){}function get_sec_val(){var e=sec_val.split("=");return e[1].substring(0,e[1].length-1)}function get_sec_name(){return sec_val.split("=")[0]}function set_sec_val(e){var t=JSON.parse(e);sec_val=t.sec_val}function ybsDeleteTable(e,t,a){var o=e.split("-"),n="";o.length>1&&(n=e.replace(o[0]+"-","")),$(".modal-body").empty(),$(".modal-body").append("<p>Data yang akan di hapus :</p>"),$(".modal-body").append("<p>"+n+"</p>"),$("#button_konfirm_delete").attr("onclick",'ybsProcDelTable("'+o[0]+'","'+t+'","'+a+'")'),$("#button_delete_single").click()}function ybsDeleteTableChecked(e,t){var a,o=get_checked_table(),n=[],s=[],r=0;for(r=0;r<o.length;r++)a=o[r].split("-"),s.push(a[0]),n.push(r+1+". "+a[1]);$(".modal-body").empty(),o.length>0&&($(".modal-body").empty(),$(".modal-body").append("<p>Data yang akan di hapus :</p>"),$(".modal-body").append("<p>"+n+"</p>"),$("#button_konfirm_delete").attr("onclick",'ybsProcDelTable("'+s+'","'+e+'","'+t+'")'),$("#button_delete_single").click())}function show_konfirm_delete(e,t){$(".modal-body").empty(),$(".modal-body").append("<p>Data yang akan di hapus :</p>"),$(".modal-body").append("<p>"+e+"</p>"),$("#button_konfirm_delete").attr("onclick",t)}function ybsProcDelTable(e,t,a){dt=get_json_format("data_delete",e),send_data=ybs_dataSending([dt]);var o=new ybsRequest;o.process(t,send_data),o.onComplite=function(){try{var e=$(a).DataTable(),t=e.search();if(void 0===page_version||null==page_version)refresh_table(t);else 1==["1.0.1","1.0.2","1.0.3","1.0.4","1.0.5","1.0.6","1.0.7"].includes(page_version)?(e.clear().draw(),e.destroy(),refresh_table(t)):refresh_table(t)}catch(e){refresh_table(t)}}}function update_form_dashboard(e,t,a){var o="0";$("#ybs-dash").hasClass("text-dark")?($("#ybs-dash").removeClass("text-dark"),$("#ybs-dash").addClass("text-orange"),o="1"):($("#ybs-dash").removeClass("text-orange"),$("#ybs-dash").addClass("text-dark"),o="0");var n=get_json_format("initial",t),s=get_json_format("idform",a),r=get_json_format("select",o);send_data=ybs_dataSending([n,s,r]);var i=new ybsRequest;i.loadingIn=function(){return""},i.process(e,send_data,"POST")}function konversi_nomor_ke_bulan(e){switch(e){case"01":e="JANUARI";break;case"02":e="FEBRUARI";break;case"03":e="MARET";break;case"04":e="APRIL";break;case"05":e="MEI";break;case"06":e="JUNI";break;case"07":e="JULI";break;case"08":e="AGUSTUS";break;case"09":e="SEPTEMBER";break;case"10":e="OKTOBER";break;case"11":e="NOVEMBER";break;case"12":e="DESEMBER"}return e}function numberFormat(e){try{return e=(e=e.toString()).split("."),val1=e[0].replace(/\,/gi,""),rev=val1.toString().split("").reverse().join(""),ribuan=rev.match(/\d{1,3}/g),ribuan=ribuan.join(",").split("").reverse().join(""),des="",2==e.length&&(des="."+e[1]),ribuan+des}catch(e){return""}}function scrollFunction(e,t){try{document.body.scrollTop>t||document.documentElement.scrollTop>t?document.getElementById(e).style.display="block":document.getElementById(e).style.display="none"}catch(e){}}function go_top(){document.body.scrollTop=0,document.documentElement.scrollTop=0}function scroll_to(e,t){window.scrollTo(e,t)}function linkToSelectize(e,t){var a=$("#"+t+" option"),o=[];$.each(a,function(e,t){var a=$(t).text(),n=$(t).val(),s=$(t).attr("data-link"),r=$(t).attr("selected"),i=[];i.text=a,i.value=n,i.data_link=s,i.selected=r,o.push(i)}),$("#"+e).ready(function(){refresh_child($("#"+e).val(),o,t)}),$("#"+e).selectize({onChange:function(e){refresh_child(e,o,t)}})}function refresh_child(e,t,a){var o=[],n={text:"--Pilih Data--",value:"null"};o.push(n);var s=0,r="",i="";$.each(t,function(t,a){if(a.data_link==e){var n,c=a.text,l=a.value;a.data_link;n={text:c,value:l},o.push(n),"selected"==a.selected&&(r=a.value),0==s&&(i=a.value),s++}}),""==r&&(r=i),(n=$("#"+a).selectize({})[0].selectize).clear(),n.clearOptions(),n.addOption(o),n.setValue(r),""==n.getValue()&&n.setValue("null")}function option_hide(e,t){var a=$("#"+t+" option"),o=$("#"+e).val(),n=0,s="";$.each(a,function(e,t){$(t).attr("data-link")==o?($(this).attr("hidden",!1),0==n&&(s=$(this).val()),n++):$(this).attr("hidden",!0)}),$("#"+t).val(s)}function linkToSelectize_mto(e){var t=$("#"+e.comboboxID+" option"),a=$("#"+e.comboboxID).val();$("#"+e.comboboxID).selectize({onChange:function(a){$.each(t,function(t,o){a==$(o).val()&&$.each(e.field_link,function(e,t){var a,n,s=[],r=$(o).attr("data-show-"+t.field_show),i=$(o).attr("data-link-"+t.field_link);a=i,n={text:r,value:i},s.push(n);var c=$("#"+t.comboboxTargetID).selectize({})[0].selectize;c.clear(),c.clearOptions(),c.addOption(s),c.setValue(a)})})}})[0].selectize.setValue(a)}ybsRequest.prototype.loadingIn=function(){return"#box-content-body"},ybsRequest.prototype.beforeProcess=function(){},ybsRequest.prototype.onBeforeSuccess=function(e){},ybsRequest.prototype.onSuccess=function(e){show_success_message(e.message),play_sound_success()},ybsRequest.prototype.onAfterSuccess=function(e){},ybsRequest.prototype.onBeforeFailed=function(e){},ybsRequest.prototype.onFailed=function(e){$(e.elementid).focus(),show_error_message(e.message),play_sound_failed()},ybsRequest.prototype.onAfterFailed=function(e){},ybsRequest.prototype.onError=function(e,t,a){show_error_message("Forbidden"==a?"Opps..akses ditolak..!! refresh halaman ini..":a),play_sound_failed()},ybsRequest.prototype.onComplite=function(){},ybsRequest.prototype.process=function(e,t,a){var o=this;1==Array.isArray(t)&&(t=ybs_dataSending(t)),null!=a&&""!=a||(a="GET"),d=e,send_data=sec_val+t,void 0===sec_val&&(send_data=t),$.ajax({type:a,url:d,data:send_data,processData:!1,cache:!1,beforeSend:function(){start_loading_in(o.loadingIn()),o.beforeProcess()},success:function(e){try{var t=JSON.parse(e);switch(sec_val=t.sec_val,t.success){case"true":o.onBeforeSuccess(t),o.onSuccess(t),o.onAfterSuccess(t);break;case"false":o.onBeforeFailed(t),o.onFailed(t),o.onAfterFailed(t);break;case"redirect":$("#redirect-form").prop("action",t.message);var a=get_sec_val();$("#redirect-form-tk").val(a),$("#redirect-button").click()}}catch(t){o.onBeforeSuccess(e),o.onSuccess(e),o.onAfterSuccess(e)}},error:function(e,t,a){o.onError(e,t,a)},complete:function(){o.onComplite(),stop_loading_in(o.loadingIn())}})},ybsRequest.prototype.processUploadFile=function(e,t,a){var o="",n=document.location.origin;o=""==xax?"":"/"+xax,link_data=n+o+svrUFile+data_token,link_data=link_data.replace(/([^:]\/)\/+/g,"$1");var s=this,r=$("#"+e)[0],i=new FormData(r);i.append(get_sec_name(),get_sec_val()),""!=a&&null!==a&&"false"===a||(a="true"),i.append("autosave",a),i.append("path_upload",t),$.ajax({type:"POST",enctype:"multipart/form-data",url:link_data,data:i,processData:!1,contentType:!1,cache:!1,beforeSend:function(){start_loading_in(s.loadingIn()),s.beforeProcess()},success:function(e){try{var t=JSON.parse(e);switch(sec_val=t.sec_val,t.success){case"true":s.onBeforeSuccess(t),s.onSuccess(t),s.onAfterSuccess(t);break;case"false":s.onBeforeFailed(t),s.onFailed(t),s.onAfterFailed(t);break;case"redirect":$("#redirect-form").prop("action",t.message);var a=get_sec_val();$("#redirect-form-tk").val(a),$("#redirect-button").click()}}catch(t){s.onBeforeSuccess(e),s.onSuccess(e),s.onAfterSuccess(e)}},error:function(e,t,a){s.onError(e,t,a)},complete:function(){s.onComplite(),stop_loading_in(s.loadingIn())}})},jQuery.fn.ybs_inputNumber=function(){this.keyup(function(e){d=numberFormat(this.value),this.value=d}),this.keydown(function(e){var t=e.keyCode;return t>=48&&t<=57||8==t||37==t||39==t||190==t||t>=96&&t<=105})},$(".input-number").on("keydown",function(e){var t=e.keyCode;return t>=48&&t<=57||8==t||37==t||39==t||t>=96&&t<=105}),$(".input-alfa").on("keydown",function(e){var t=e.keyCode;return t>=65&&t<=90||8==t||37==t||39==t}),$(".input-alfa-number").on("keydown",function(e){var t=e.keyCode;return t>=48&&t<=57||t>=65&&t<=90||8==t||37==t||39==t||t>=96&&t<=105}),$(".ybs-input-number").ybs_inputNumber(),function(e){e.fn.show_onscroll=function(t){id_element=e(this).attr("id"),window.onscroll=function(){scrollFunction(id_element,t)}}}(jQuery),function(e){e.fn.linkTo=function(t){parentid=e(this).attr("id"),e(this).ready(function(){option_hide(parentid,t)}),e(this).change(function(){option_hide(parentid,t)})}}(jQuery);var waiting_process=0;function linkToSelectize_Big(t,o){var n=$("#"+t).attr("data-table"),s=($("#"+t).attr("data-primary"),$("#"+t).attr("data-flink")),r=$("#"+t).attr("data-fshow"),i=$("#"+t).attr("data-select"),l=$("#"+o).attr("data-table"),d=($("#"+o).attr("data-primary"),$("#"+o).attr("data-flink")),u=$("#"+o).attr("data-fshow"),_=$("#"+o).attr("data-select");[].push({text:"--Pilih Data--",value:"null"});var p="",m=document.location.origin;p=""==xax?"":"/"+xax,link_data=m+p+svrCMB,link_data=link_data.replace(/([^:]\/)\/+/g,"$1"),$("#"+t).ready(function(){if(""==s||null==s||void 0===s){a=get_json_format("t",n),b=get_json_format("fs",r),c=get_json_format("w",""),x=get_json_format("wv",""),y=get_json_format("tk",data_token),send_data=ybs_dataSending([y,a,b,c,x]);var m=new ybsRequest;m.process(link_data,send_data),waiting_process=1,m.onSuccess=function(a){var n=$("#"+t).selectize({options:a.message,onChange:function(t){if(0==waiting_process){waiting_process=1;var a=new ybsRequest;e=get_json_format("t",l),p=get_json_format("fs",u),g=get_json_format("w",d),h=get_json_format("wv",t),y=get_json_format("tk",data_token),send_data=ybs_dataSending([y,e,p,g,h]),a.process(link_data,send_data),a.onSuccess=function(e){waiting_process=0;var t=$("#"+o).selectize({})[0].selectize;t.clear(!0),t.clearOptions(),t.addOption(e.message),t.setValue(_),""==t.getValue()&&t.setValue("null")}}}});waiting_process=0;var s=n[0].selectize;s.setValue(i),""==s.getValue()&&s.setValue("null")}}else $("#"+t).selectize({onChange:function(t){if(0==waiting_process){waiting_process=1;var a=new ybsRequest;e=get_json_format("t",l),p=get_json_format("fs",u),g=get_json_format("w",d),h=get_json_format("wv",t),y=get_json_format("tk",data_token),send_data=ybs_dataSending([y,e,p,g,h]),a.process(link_data,send_data),a.onSuccess=function(e){waiting_process=0;var t=$("#"+o).selectize({})[0].selectize;t.clear(!0),t.clearOptions(),t.addOption(e.message),t.setValue(_),""==t.getValue()&&t.setValue("null")}}}})})}var cupt=0;function dropzone_area(e){0==cupt&&(clear_temp_upload(),cupt=1);var t=e.elementID,a=e.max_files,o=e.max_size,n=e.type,r=e.allowRemoveFile,i=$(t).attr("data-folder"),c=e.timeout,l=e.autosave;null==a&&(a=20),null==o&&(o=25),null==r&&(r=!1),null==c&&(c=18e4),null==l&&(l=!0);var d="";switch(n){case"image":d="image/*";break;case"audio":d="audio/*";break;case"vidio":d="video/*";break;case"all":d="";break;case"document":d="application/.xls,.xlsx,.pdf,.doc,.docx,.ppt,.pptx,.txt";break;default:d=""}var u="",_=document.location.origin;u=""==xax?"":"/"+xax,link_data=_+u+svrUFile+data_token,link_remove=_+u+svrRFile+data_token,link_data=link_data.replace(/([^:]\/)\/+/g,"$1"),link_remove=link_remove.replace(/([^:]\/)\/+/g,"$1"),Dropzone.autoDiscover=!1;var p=new Dropzone(t,{maxFilesize:o,maxFiles:a,acceptedFiles:d,url:link_data,paramName:"file",dictFileTooBig:"File Terlalu Besar ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"Type file ini tidak dizinkan",dictMaxFilesExceeded:"Opps..Max fileUpload : {{maxFiles}} Files",dictResponseError:"Error while uploading file!",addRemoveLinks:!0,timeout:c,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name></span></div>\n    <div class="dz-size" data-dz-size></div>\n    <img data-dz-thumbnail data-image="Preview" class="ybs-image-slider"/>\n  </div>\n  <div class="progress progress-small progress-striped active"><div class="progress-bar progress-bar-success" data-dz-uploadprogress></div></div>\n  <div class="dz-success-mark"><span></span></div>\n  <div class="dz-error-mark"><span></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n</div>',init:function(){this.on("sending",function(e,t,a){a.append("path_upload",i);var o=sec_val.split("=");a.append("autosave",l),a.append(o[0],o[1].replace("&",""))}),this.on("success",function(e,a){try{var o=JSON.parse(a);if(sec_val=o.sec_val,"false"==o.success)$(e.previewElement).addClass("dz-error").find(".dz-error-message").text(o.message);else{var n=$(t).attr("data-upload"),s=$(t).attr("data-time"),r=$(t).attr("data-ext"),i=$(t).attr("data-orig-name");null==n?(n=o.message,s=o.time_post,r=o.ext,i=o.orig_name):(n=n+" "+o.message,s=s+" "+o.time_post,r=r+" "+o.ext,i=i+" "+o.orig_name),$(t).attr("data-upload",n),$(t).attr("data-time",s),$(t).attr("data-ext",r),$(t).attr("data-orig-name",i),e.upload_id=o.message,e.upload_time=o.time_post,e.upload_ext=o.ext,e.upload_orig_name=o.orig_name}}catch(t){$(e.previewElement).addClass("dz-error").find(".dz-error-message").text(a)}}),this.on("removedfile",function(e){if(1==r&&1==l){var a=new ybsRequest;s=get_json_format("upload_id",e.upload_time),send_data=ybs_dataSending([s]),a.process(link_remove,send_data),a.onSuccess=function(e){show_success_message(e.message)},a.onFailed=function(e){},o=(o=(o=$(t).attr("data-upload")).replace(e.upload_id,"")).replace(/^\s+|\s+$/gm,""),$(t).attr("data-upload",o),n=(n=(n=$(t).attr("data-time")).replace(e.upload_time,"")).replace(/^\s+|\s+$/gm,""),$(t).attr("data-time",n),i=(i=(i=$(t).attr("data-ext")).replace(e.upload_ext,"")).replace(/^\s+|\s+$/gm,""),$(t).attr("data-ext",i),c=(c=(c=$(t).attr("data-orig-name")).replace(e.upload_orig_name,"")).replace(/^\s+|\s+$/gm,""),$(t).attr("data-orig-name",c)}else{var o,n,i,c;if(void 0!==(o=$(t).attr("data-upload")))o=(o=o.replace(e.upload_id,"")).replace(/^\s+|\s+$/gm,""),$(t).attr("data-upload",o),n=(n=(n=$(t).attr("data-time")).replace(e.upload_time,"")).replace(/^\s+|\s+$/gm,""),$(t).attr("data-time",n),i=(i=(i=$(t).attr("data-ext")).replace(e.upload_ext,"")).replace(/^\s+|\s+$/gm,""),$(t).attr("data-ext",i),c=(c=(c=$(t).attr("data-orig-name")).replace(e.upload_orig_name,"")).replace(/^\s+|\s+$/gm,""),$(t).attr("data-orig-name",c)}})}});$(document).on("ajaxloadstart.page",function(e){try{p.destroy()}catch(e){}})}function dropzone_save(e){var t="",o=document.location.origin;t=""==xax?"":"/"+xax;link_sv=o+t+svrTMP+data_token;var n=e.split(",");$.each(n,function(e,t){if(times=$(t).attr("data-time"),""==times||null==times||void 0===times)return!1;var o=new ybsRequest;a=get_json_format("time",times),send_data=ybs_dataSending([a]),o.process(link_sv,send_data),o.onSuccess=function(){$(t).attr("data-time",""),$(t).attr("data-upload",""),$(t).attr("data-ext",""),$(t).attr("data-orig-name","")}})}function dropzone_result(e,t){var a=this,o="",n=document.location.origin;o=""==xax?"":"/"+xax;link_gf=null==t||""==t?n+o+svrAccessFile+data_token:n+o+svrAccessFileTMP+data_token;var s=get_json_format("time",e);send_data=ybs_dataSending([s]);var r=new ybsRequest;r.process(link_gf,send_data),r.onSuccess=function(e){a.onComplite(e)}}dropzone_result.prototype.onComplite=function(e){};var dataRemx=[];function remove_img(e){var a="",o=document.location.origin;a=""==xax?"":"/"+xax,link_remove=o+a+svrRFile+data_token,link_remove=link_remove.replace(/([^:]\/)\/+/g,"$1");var n=new ybsRequest;r=get_json_format("relation",dataRemx[e].relationTable),s=get_json_format("upload_id",dataRemx[e].time),t=get_json_format("action",dataRemx[e].actionRow),u=get_json_format("field",dataRemx[e].field),send_data=ybs_dataSending([r,s,t,u]),n.process(link_remove,send_data),n.onSuccess=function(t){show_success_message(t.message),$(".file-"+e).remove()},n.onFailed=function(e){}}function clear_temp_upload(){var e="",t=document.location.origin;e=""==xax?"":"/"+xax,link_clear=t+e+svrClearTMP+data_token,link_clear=link_clear.replace(/([^:]\/)\/+/g,"$1");var a=new ybsRequest;a.process(link_clear),a.onSuccess=function(e){}}function reload_script(e,t){$(e).remove();var a=document.createElement("script"),o=e;o=(o=o.replace("#","")).replace(".",""),a.type="text/javascript",a.src=t,a.id=o,$("#section_script").append(a)}function reload_css(){var e="?reload="+(new Date).getTime();$('link[rel="stylesheet"]').each(function(){this.href=this.href.replace(/\?.*|$/,e)})}!function(e){e.fn.ybsPrivateStorage=function(t){var a=this;if(void 0!==t.images&&""!==t.images){var o=e.trim(t.images),n="",s="",r="";void 0!==t.itemSM&&(n="col-sm-"+(n=12/t.itemSM)),void 0!==t.itemMD&&(s="col-md-"+(s=12/t.itemMD)),void 0!==t.itemLG&&(r="col-lg-"+(r=12/t.itemLG)),new dropzone_result(o).onComplite=function(o){try{var i=JSON.parse(o.message),c="",l=0;e.each(i,function(e,a){var o="",i="",d="";void 0!==t.relation&&""!==t.relation&&(o=t.relation.table,d=t.relation.field,i=t.relation.actionRow),dataRemx[l]={time:a.time,relationTable:o,field:d,actionRow:i};var u="",_="",p="";t.btnDownload&&(_='<a href="'+a.link+'" class="ybs-storage icon  d-md-inline-block ml-3" style="font-size:18px" title="download"><i class="text-orange fa fa-cloud-download m-1"></i></a>'),t.btnRemove&&(p='<a href="javascript:void(0)" onclick="show_konfirm_delete(\''+a.orig_name+"','remove_img("+l+')\')" class="ybs-storage icon " data-toggle="modal" data-target="#modal-danger" style="font-size:18px"><i class="text-red fa fa-close m-1" title="remove"></i></a>'),u="image"!==a.type?'<h1><i class="fe fe-file"></i></h1>':'<a href="javascript:void(0)" class="mb-3"> <img src="'+a.link+'" alt=""  class="rounded"> </a>',c=c+'<div class="'+n+" "+s+" "+r+" file-"+l+'"><div class="card p-3" style="box-shadow:2px 2px 10px gray">'+u+'<div style="font-size:12px">'+a.orig_name+'</div><div class="d-flex align-items-center px-2"><div class="ml-auto text-muted">'+_+p+"</div></div></div></div>",l++});e(a).append('<div class="row row-cards" >'+c+"</div>")}catch(e){}}}}}(jQuery);